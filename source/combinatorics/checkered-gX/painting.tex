% $date: 2014-11-12

% $timetable:
%   gX:
%     2014-11-12:
%       1:

\section*{Клетчатая комбинаторика: Раскраски}

% $authors:
% - Владимир Шарич

\begingroup
\providecommand\ifincludesolutions{\iffalse}

% $matter[with-solutions]:
% - verbatim: \begingroup\newcommand\ifincludesolutions{\iftrue}
% - .[-with-solutions]
% - verbatim: \endgroup

\emph{Задачи из short list'ов.}

\ifincludesolutions
\textbf{Версия с решениями.}
\emph{Решения являются слабообработанным переводом с~английского.
Beware!}
\fi

\begin{problems}

\item\textbf{(1996, UKR)}
Квадрат $(n - 1) \times (n - 1)$ поделен естественным образом на~$(n - 1)^2$
единичных квадратиков.
Каждая из~$n^2$ вершин этих квадратиков должна быть раскрашена в~красный или
синий.
Найдите количество всех таких различных раскрасок, что каждый квадратик имеет
в~точности две красные вершины.
(Две схемы раскраски считаются различными, если в~этих двух схемах хотя~бы одна
вершина раскрашена по-разному.)

\end{problems}

\ifincludesolutions
Пусть вершинам в~нижнем ряду присвоена произвольная раскраска, и~предположим,
что некоторые две смежные вершины получили одинаковый цвет.
Количетво подобных раскрасок равно $2^n-2$.
Несложно увидеть, что тогда цвета оставшихся вершин получаются заданными
единственными образом, чтобы удовлетворить требованию.
Таким образом, в~этом случае $2^n-2$ возможных раскрасок.
\par
Далее, предположим, что вершины в~нижнем ряду раскрашены попеременно в~красный и~синий.
Существует две подобных раскраски.
В~этом случае,то~же должно выполняться для каждого ряда, и~отсюда мы~получаем
$2^n$ возможных раскрасок.
\par
Отсюда следует, что полное число рассматриваемых раскрасок
$(2^n - 2) + 2^n = 2^{n+1} - 2$.
\fi % \ifincludesolutions

\begin{problems}

\item\textbf{(1998, IRN)}%
\label{combinatorics/painting-gX:1998-IRN:problem}
Игра производится на~прямоугольной доске $m \times n$, используя $m n$ фишек.
Каждая фишка с~одной стороны белая, а~с~другой~--- черная.
Изначально в~каждой клетке доски лежит фишка белой стороной вверх, кроме одного
угла, в~котором фишка черной стороной вверх.
За~одно действие можно убрать одну фишку с~черной верхней стороной
и~перевернуть все фишки в~квадратах, имеющих общую сторону с~квадратом,
с~которого была удалена фишка.
Найдите все пары натуральных чисел $(m,n)$ таких, что все фишки могут быть
удалены с~доски.

\end{problems}

\ifincludesolutions
Пусть $A$~--- количество фишек с~белой верхней стороной, а~$B$~--- количество
пар фишек, чьи квадраты имеют общую сторону.
\par
Мы~утверждаем, что четность суммы $A + B$ не~изменяется во~время игры.
Предположим, что некоторым ходом мы~удаляем фишку ровно с~$k$ соседями, среди
которых $r$ лежат белой стороной вверх ($0 \leq r \leq k \leq 4$).
Само собой, эта фишка лежит черной стороной верх.
Когда мы~ее~удаляем, $r$ белых фишек становятся черными, в~то~время как
$(k - r)$ черных фишек становятся белыми.
Таким образом, $A$ изменяется на~$(k - 2 r)$.
А~$B$ уменьшается на~$k$.
Из~этого следует, что $A + B$ уменьшается на~$2 r$ и~сохраняет свою четность,
как и~предполагалось.
\par
Изначально, $A = m n - 1$, а~$B = m (n - 1) + n (m - 1)$;
следовательно, $A + B$ равно $3 m n - m - n - 1$.
Если нам удалось удалить все фишки, то~в~конце $A + B = 0$.
Следовательно, $3 m n - m - n - 1 = (m - 1) (n - 1) + 2 (m n - 1)$ должно быть
четно, что равносильно тому, что хотя~бы одно из~чисел $m$ и~$n$ должно быть
нечетно.
\par
С~другой стороны, если $m$ или $n$ нечетно, игра может быть успешно закончена.
Пусть $m$~--- нечетно.
Как показано на~рис.~\ref{combinatorics/painting-gX:1998-IRN:solution:fig}, мы~можем
прийти к~позиции $(1)$ за~$m$ ходов;
за~$\frac{m+1}{2}$ ходов мы~делаем позицию $(1')$, и~за~следующие
$\frac{m-1}2$ ходов~--- позицию $(2)$.
Будем продолжать это, пока не~опустошим все колонки.
\par
\begin{figure}[ht]\begin{center}\def\drown{\raisebox{-0.5\height}}
\drown{\jeolmfigure{1998-IRN-solution-0}}
\;\drown{$\to$}\;
\drown{\jeolmfigure{1998-IRN-solution-1}}
\;\drown{$\to$}\;
\drown{\jeolmfigure{1998-IRN-solution-2}}
\;\drown{$\to$}\;
\drown{\jeolmfigure{1998-IRN-solution-3}}
\par\caption{позиции $(0)$, $(1)$, $(1')$, $(2)$
к~решению задачи~\ref{combinatorics/painting-gX:1998-IRN:problem}}%
\label{combinatorics/painting-gX:1998-IRN:solution:fig}%
\end{center}\end{figure}
\fi % \ifincludesolutions

\begin{problems}

\item\textbf{(1999, BLR)}
\label{combinatorics/painting-gX:1999-BLR:problem}
Дано четное $n \in \mathbb{N}$.
Скажем, что две различные клетки доски $n \times n$ \emph{соседние}, если у~них
есть общая сторона.
Найдите наименьшее число клеток на~доске $n \times n$, которые надо отметить,
чтобы каждая клетка (отмеченная или нет) имела отмеченную соседнюю клетку.

\end{problems}

\ifincludesolutions
\begin{figure}[ht]\begin{center}
\jeolmfigure[width=0.4\linewidth]{1999-BLR-solution-frames}
\caption{к~решению задачи~\ref{combinatorics/painting-gX:1999-BLR:problem}.}%
\label{combinatorics/painting-gX:1999-BLR:solution:fig}%
\end{center}\end{figure}
Пусть $n = 2 k$.
Покрасим крайние квадратики в~черный, соседние к~ним~--- в~белый.
Далее, красим попеременно в~черный и~белый цвета, пока не~покрасим все клетки 
(рис.~\ref{combinatorics/painting-gX:1999-BLR:solution:fig}).
Назовем клетки, покрашенные некоторой итерацией, <<рамкой>>.
В~описанной раскраске каждая клетка (белая или черная) будет соседней ровно
двум черным клеткам.
Количество черных клеток равно $2 k (k + 1)$, следовательно, нужно покрасить
не~менее $k (k + 1)$ клеток.
\par
С~другой стороны, идя вдоль черной рамки, мы~будем отмечать пару соседних
клеток, а~следующую пару не~отмечать.
Каждая клетка черной рамки будет иметь одного отмеченного соседа.
По~отметке в~черной рамке можно выбрать такую отметку в~следующей, чтобы каждая
клетка белой рамки имела ровно одного отмеченного соседа.
Следовательно, совершив такие операции, начиная с~внешней рамки, мы~отметим
ровно половину черных клеток, т.~е. $k (k + 1)$, и~у~каждой клетки будет
отмеченный сосед.
\par
Отсюда следует, что искомое число отметок равно $k (k + 1)$.
\par
\emph{Примечание.}
Для $n = 4 k - 1$ и~$n = 4 k + 1$ можно построить аналогичные отметки для
получения $4 k^2 - 1$ и~$(2 k + 1)^2$ отметок соответственно.
\fi % \ifincludesolutions

\begin{problems}

\item\textbf{(2000, CZE)}%
\label{combinatorics/painting-gX:2000-CZE:problem}
Пусть $n$ и~$k$~--- натуральные числа такие, что $n / 2 < k \leq 2 n / 3$.
Найдите наименьшее $m$, для которого можно разместить $m$~пешек в~$m$~квадратах
шахматной доски $n \times n$ так, что ни~одна строка и~ни~один столбец
не~содержит блока из~$k$ смежных пустых квадратов.

\end{problems}

\ifincludesolutions
Назовем \emph{хорошей расстановкой} пешек~--- такую расстановку, в~которой нет
блока из~$k$ смежных квадратов в~строках или в~столбцах.
\par
Мы~можем сделать хорошую расстановку следующим образом: обозначим строки
и~колонки числами $0, 1, \ldots, n - 1$ и~поставим пешку в~квадрат $(i, j)$
тогда и~только тогда, когда $k$ делит $i + j + 1$.
Очевидно, это будет хорошей расстановкой, в~которой пешки лежат на~трех линиях
в~$k$, $(2 n - 2 k)$, и~$(2 n - 3 k)$ квадратах, что в~сумме дает
$(4 n - 4 k)$ пешек.
\par
\begin{figure}[ht]\begin{center}
\(\begin{matrix}
    n - k    &    A    &     B     &    C    \\[2ex]
    2 k - n  &    H    &   \cdot   &    D    \\[2ex]
    n - k    &    G    &     F     &    E    \\[2ex]
             &  n - k  &  2 k - n  &  n - k
\end{matrix}\)
\caption{к~решению задачи~\ref{combinatorics/painting-gX:2000-CZE:problem}.}%
\label{combinatorics/painting-gX:2000-CZE:solution:fig}
\end{center}\end{figure}
Докажем теперь, что хорошая расстановка должна содержать не~менее
$(4 n - 4 k)$ пешек.
Предположим, что мы~имеем хорошую расстановку $m$~пешек.
Разделим доску на~девять прямоугольников, как показано
на~рис.~\ref{combinatorics/painting-gX:2000-CZE:solution:fig}.
Пусть $a, b, \ldots, h$~--- количества пешек в~прямоугольниках
$A, B, \ldots, H$ соответственно.
Заметим, что каждый столбец, проходящий через $A$, $B$, и~$C$, либо содержит
пешку в~$B$, либо содержит пешку и~в~$A$ и~в~$C$.
Из~этого следует, что $a + c + 2 b \geq 2 (n - k)$.
Аналогично получаем, что $c + e + 2 d$, $e + g + 2 f$, и~$g + a + 2 h$ все
не~менее $2 (n - k)$.
Сложив и~разделив на~2, получаем $a + b + \ldots + h \geq 4 (n - k)$, что
доказывает утверждение.
\fi % \ifincludesolutions

\endgroup % \providecommand\ifincludesolutions

